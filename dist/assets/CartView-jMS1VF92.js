import { c as p } from './cartStore-Bp0LImvg.js'; import { _ as f, m as y, a as g, c as l, b as t, d as C, F as u, v as _, g as r, t as n, y as b, z as m, x as k, o as i, r as w } from './index-DrL7xUhK.js'; import { B as x } from './BannerSection-DB9sHSmb.js'; import './index-Bnm8mFos.js'; const P = { VITE_APP_URL: 'https://vue3-course-api.hexschool.io/v2', VITE_APP_PATH: 'david555', BASE_URL: './', MODE: 'production', DEV: !1, PROD: !0, SSR: !1 }; const { VITE_APP_URL: A, VITE_APP_PATH: V } = P; const $ = { components: { BannerSection: x }, data () { return { isAddOrDelNum: !1, cartData: {}, coupon: 'happy' } }, computed: { ...y(p, ['carts', 'totalPrice']) }, methods: { ...g(p, ['getCart', 'delCartProduct', 'delAllCart', 'updateQty']), addCoupon () { const s = `${A}/api/${V}/coupon`; const o = { code: this.coupon }; this.$http.post(s, { data: o }).then(d => { d.data.success && (this.$swal('成功', '成功加入優惠券', 'success'), this.getCart()) }).catch(d => { d.response.data.message && this.$swal('失敗', '找不到優惠券', 'error') }) }, toCheckout () { this.$router.push('/checkout') } }, mounted () { this.getCart() } }; const S = { class: 'position-relative py-8 mb-6' }; const T = k('<div class="container d-flex flex-column"><div class="row justify-content-center my-auto"><div class="col-md-4 text-center"><h2 class="fw-bold mb-3 text-light h1">購物車</h2><nav style="--bs-breadcrumb-divider:&#39;&gt;&#39;;" aria-label="breadcrumb"><ol class="breadcrumb d-flex justify-content-center"><li class="breadcrumb-item"><a href="#" class="aboutHover">首頁</a></li><li class="breadcrumb-item text-light" aria-current="page"><a href="#" class="aboutHover">購物車</a></li></ol></nav></div></div></div>', 1); const E = { class: 'container' }; const B = { class: 'row mb-5' }; const j = { class: 'col-md-8' }; const D = { class: 'table border' }; const N = t('thead', null, [t('tr', null, [t('th'), t('th', null, '產品'), t('th', null, '單價'), t('th', { width: '140' }, '數量'), t('th', { width: '70', class: 'text-end' }, '總價')])], -1); const U = { style: { 'line-height': '38px' } }; const R = { class: 'text-center' }; const H = ['onClick']; const I = t('i', { class: 'bi bi-trash' }, null, -1); const L = [I]; const q = { class: 'd-flex align-items-center' }; const M = ['src']; const O = { class: 'h6 mt-2 mt-lg-0' }; const Q = { class: 'text-primary' }; const F = { class: 'input-group bg-light border' }; const z = { class: 'input-group-prepend' }; const G = ['onClick']; const J = t('i', { class: 'bi bi-dash' }, null, -1); const K = [J]; const W = ['onUpdate:modelValue']; const X = { class: 'input-group-append' }; const Y = ['onClick']; const Z = t('i', { class: 'bi bi-plus' }, null, -1); const tt = [Z]; const et = { class: 'text-primary text-end' }; const st = { class: 'text-end' }; const ot = ['disabled']; const nt = { class: 'col-md-4 mt-4 mt-md-0' }; const lt = { class: 'd-flex justify-content-between' }; const it = t('h2', { class: 'h4' }, '購物車清單', -1); const dt = t('hr', null, null, -1); const at = t('hr', null, null, -1); const ct = { class: 'd-flex justify-content-between mb-1' }; const rt = t('span', null, '小計', -1); const ut = { class: 'd-flex justify-content-between mb-4' }; const ht = t('span', { class: 'fw-bold h5' }, '總計', -1); const pt = { class: 'fw-bold h6 text-primary' }; const _t = { class: 'input-group mb-3' }; const bt = ['disabled']; function mt (s, o, d, vt, h, a) { const v = w('BannerSection'); return i(), l(u, null, [t('div', S, [C(v), T]), t('div', E, [t('div', B, [t('div', j, [t('div', null, [t('table', D, [N, t('tbody', U, [(i(!0), l(u, null, _(s.carts, e => (i(), l('tr', { key: e.id }, [t('td', R, [t('a', { href: '#', onClick: r(c => s.delCartProduct(e), ['prevent']) }, L, 8, H)]), t('td', null, [t('div', q, [t('img', { class: 'object-fit-cover d-none d-lg-inline-block me-3', height: '50', width: '100', alt: 'card-img', src: e.product.imageUrl }, null, 8, M), t('h2', O, n(e.product.title), 1)])]), t('td', Q, '$ ' + n(e.product.origin_price), 1), t('td', null, [t('div', F, [t('div', z, [t('button', { class: 'btn btn-light border-end rounded-0 py-2', type: 'button', id: 'button-addon1', onClick: c => s.updateQty(e, !1) }, K, 8, G)]), b(t('input', { type: 'number', class: 'form-control border-0 text-center my-auto shadow-none bg-light', placeholder: '', 'aria-label': 'Example text with button addon', 'aria-describedby': 'button-addon1', 'onUpdate:modelValue': c => e.qty = c, value: '1' }, null, 8, W), [[m, e.qty, void 0, { number: !0 }]]), t('div', X, [t('button', { class: 'btn btn-light rounded-0 border-start py-2', type: 'button', id: 'button-addon2', onClick: c => s.updateQty(e, !0) }, tt, 8, Y)])])]), t('td', et, '$ ' + n(e.product.price * e.qty), 1)]))), 128))])]), t('div', st, [t('button', { class: 'btn btn-primary', disabled: s.carts.length === 0, onClick: o[0] || (o[0] = r((...e) => a.toCheckout && a.toCheckout(...e), ['prevent'])) }, ' 結帳去 ', 8, ot)])])]), t('div', nt, [t('div', lt, [it, t('button', { class: 'btn btn-dark', type: 'button', onClick: o[1] || (o[1] = r((...e) => s.delAllCart && s.delAllCart(...e), ['prevent'])) }, '清空購物車')]), dt, (i(!0), l(u, null, _(s.carts, e => (i(), l('div', { class: 'd-flex justify-content-between mb-1', key: e.name }, [t('span', null, n(e.product.title), 1), t('span', null, 'NT$ ' + n(e.product.origin_price), 1)]))), 128)), at, t('div', ct, [rt, t('span', null, 'NT$ ' + n(s.totalPrice.total), 1)]), t('div', ut, [ht, t('span', pt, 'NT$ ' + n(s.totalPrice.final_total), 1)]), t('div', _t, [b(t('input', { type: 'text', class: 'form-control', placeholder: '請輸入優惠碼', 'onUpdate:modelValue': o[2] || (o[2] = e => h.coupon = e), 'aria-label': "Recipient's username", 'aria-describedby': 'button-addon2' }, null, 512), [[m, h.coupon]]), t('button', { class: 'btn btn-primary', type: 'button', id: 'button-addon2', disabled: s.carts.length === 0, onClick: o[3] || (o[3] = r((...e) => a.addCoupon && a.addCoupon(...e), ['prevent'])) }, ' 送出 ', 8, bt)])])])])], 64) } const kt = f($, [['render', mt]]); export { kt as default }
