import { B as y } from './BannerSection-DB9sHSmb.js'; import { _ as w, c as u, d as l, w as b, b as e, F as v, v as E, t as n, x as L, r, o as _, B as m } from './index-DrL7xUhK.js'; const S = { VITE_APP_URL: 'https://vue3-course-api.hexschool.io/v2', VITE_APP_PATH: 'david555', BASE_URL: './', MODE: 'production', DEV: !1, PROD: !0, SSR: !1 }; const { VITE_APP_URL: p, VITE_APP_PATH: g } = S; const k = { components: { BannerSection: y }, data () { return { carts: [], totalPrice: {}, isLoading: '', form: { user: { email: '', name: '', tel: '', address: '' }, message: '' } } }, methods: { getCart () { this.isLoading = !0; const i = `${p}/api/${g}/cart`; this.$http.get(i).then(s => { s.data.success && (this.carts = s.data.data.carts, this.totalPrice = { total: s.data.data.total, final_total: s.data.data.final_total }, setTimeout(() => { this.isLoading = !1 }, 1e3)) }).catch(s => { s.response.data.message && this.$swal('錯誤', '你所查看的API不存在', 'error') }) }, sendOrder () { this.isLoading = !0; const i = `${p}/api/${g}/order`; this.$http.post(i, { data: this.form }).then(s => { if (s.data.success) { const h = s.data.orderId; setTimeout(() => { this.isLoading = !1 }, 2e3), this.$refs.form.resetForm(), this.$router.push(`/order/${h}`) } }).catch(s => { s.response.data.message && this.$swal('失敗', '請檢察表單資訊', 'error') }) }, isPhone (i) { return /^(09)[0-9]{8}$/.test(i) ? !0 : '需要正確的電話號碼' } }, mounted () { this.getCart() } }; const B = e('div', { class: 'loadingio-spinner-spin-nq4q5u6dq7r' }, [e('div', { class: 'ldio-x2uulkbinbj' }, [e('div', null, [e('div')]), e('div', null, [e('div')]), e('div', null, [e('div')]), e('div', null, [e('div')]), e('div', null, [e('div')]), e('div', null, [e('div')]), e('div', null, [e('div')]), e('div', null, [e('div')])])], -1); const A = { class: 'position-relative py-8 mb-6' }; const T = L('<div class="container d-flex flex-column"><div class="row justify-content-center my-auto"><div class="col-md-4 text-center"><h2 class="fw-bold mb-3 text-light h1">訂單</h2><nav style="--bs-breadcrumb-divider:&#39;&gt;&#39;;" aria-label="breadcrumb"><ol class="breadcrumb d-flex justify-content-center"><li class="breadcrumb-item"><a href="#" class="aboutHover">首頁</a></li><li class="breadcrumb-item text-light" aria-current="page"><a href="#" class="aboutHover">訂單</a></li></ol></nav></div></div></div>', 1); const U = { class: 'container' }; const q = { class: 'row' }; const F = { class: 'col-md-6' }; const I = { class: 'border p-4 mb-5' }; const C = e('h2', { class: 'h4 mb-3' }, '訂購人資料', -1); const N = { class: 'mb-3' }; const R = e('label', { for: 'email', class: 'form-label' }, 'Email', -1); const D = { class: 'mb-3' }; const H = e('label', { for: 'name', class: 'form-label' }, '收件人姓名', -1); const O = { class: 'mb-3' }; const j = e('label', { for: 'tel', class: 'form-label' }, '收件人電話', -1); const M = { class: 'mb-3' }; const $ = e('label', { for: 'address', class: 'form-label' }, '收件人地址', -1); const z = { class: 'mb-3' }; const G = e('label', { for: 'message', class: 'form-label' }, '留言', -1); const J = e('div', { class: 'text-end' }, [e('button', { type: 'submit', class: 'btn btn-primary border w-100' }, '送出訂單')], -1); const K = { class: 'col-md-6' }; const Q = { class: 'p-4 border' }; const W = e('h2', { class: 'h4 mb-3' }, '訂單資訊', -1); const X = { class: 'table table-light' }; const Y = e('thead', null, [e('tr', null, [e('th', null, '產品'), e('th', { class: 'text-end' }, '總計')])], -1); const Z = { class: 'fw-bold' }; const ee = { class: 'text-end' }; const se = e('td', { class: 'fw-bold' }, '小計', -1); const te = { class: 'text-end text-primary' }; const le = e('td', { class: 'fw-bold' }, '總計', -1); const oe = { class: 'text-end text-primary fw-bold' }; function ae (i, s, h, ie, t, f) { const V = r('VueLoading'); const x = r('BannerSection'); const d = r('VField'); const c = r('ErrorMessage'); const P = r('VForm'); return _(), u(v, null, [l(V, { active: t.isLoading }, { default: b(() => [B]), _: 1 }, 8, ['active']), e('div', A, [l(x), T]), e('div', U, [e('div', q, [e('div', F, [e('div', I, [C, l(P, { ref: 'form', onSubmit: f.sendOrder }, { default: b(({ errors: o }) => [e('div', N, [R, l(d, { id: 'email', name: '信箱', type: 'email', class: m(['form-control bg-light', { 'is-invalid': o.信箱 }]), placeholder: '請輸入 Email', rules: 'required|email', modelValue: t.form.user.email, 'onUpdate:modelValue': s[0] || (s[0] = a => t.form.user.email = a) }, null, 8, ['class', 'modelValue']), l(c, { name: '信箱', class: 'invalid-feedback' })]), e('div', D, [H, l(d, { id: 'name', name: '姓名', type: 'text', class: m(['form-control bg-light', { 'is-invalid': o.姓名 }]), placeholder: '請輸入姓名', rules: 'required', modelValue: t.form.user.name, 'onUpdate:modelValue': s[1] || (s[1] = a => t.form.user.name = a) }, null, 8, ['class', 'modelValue']), l(c, { name: '姓名', class: 'invalid-feedback' })]), e('div', O, [j, l(d, { id: 'tel', name: '電話', type: 'text', class: m(['form-control bg-light', { 'is-invalid': o.電話 }]), placeholder: '請輸入電話', rules: f.isPhone, modelValue: t.form.user.tel, 'onUpdate:modelValue': s[2] || (s[2] = a => t.form.user.tel = a) }, null, 8, ['rules', 'class', 'modelValue']), l(c, { name: '電話', class: 'invalid-feedback' })]), e('div', M, [$, l(d, { id: 'address', name: '地址', type: 'text', class: m(['form-control bg-light', { 'is-invalid': o.地址 }]), placeholder: '請輸入地址', rules: 'required', modelValue: t.form.user.address, 'onUpdate:modelValue': s[3] || (s[3] = a => t.form.user.address = a) }, null, 8, ['class', 'modelValue']), l(c, { name: '地址', class: 'invalid-feedback' })]), e('div', z, [G, l(d, { id: 'message', class: 'form-control bg-light', name: 'message', cols: '30', rows: '5', as: 'textarea', modelValue: t.form.message, 'onUpdate:modelValue': s[4] || (s[4] = a => t.form.message = a) }, null, 8, ['modelValue'])]), J]), _: 1 }, 8, ['onSubmit'])])]), e('div', K, [e('div', Q, [W, e('table', X, [Y, e('tbody', null, [(_(!0), u(v, null, E(t.carts, o => (_(), u('tr', { key: o.id }, [e('td', Z, n(o.product.title) + ' x ' + n(o.qty), 1), e('td', ee, '$ ' + n(o.product.origin_price), 1)]))), 128)), e('tr', null, [se, e('td', te, '$ ' + n(t.totalPrice.total), 1)]), e('tr', null, [le, e('td', oe, '$ ' + n(t.totalPrice.final_total), 1)])])])])])])])], 64) } const re = w(k, [['render', ae]]); export { re as default }
