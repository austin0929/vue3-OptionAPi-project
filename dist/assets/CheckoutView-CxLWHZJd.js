import{V as x}from"./VueLoading-61m2rGh4.js";import{_ as y,c as u,d as o,b as e,w as P,F as f,v as w,t as r,x as L,r as c,o as _,B as m}from"./index-CoW_epj6.js";var E={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"david555",BASE_URL:"/vue3-OptionAPi-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:v,VITE_APP_PATH:p}=E,A={components:{VueLoading:x},data(){return{carts:[],totalPrice:{},isLoading:"",form:{user:{email:"",name:"",tel:"",address:""},message:""}}},methods:{getCart(){this.isLoading=!0;const i=`${v}/api/${p}/cart`;this.$http.get(i).then(s=>{s.data.success&&(this.carts=s.data.data.carts,this.totalPrice={total:s.data.data.total,final_total:s.data.data.final_total},setTimeout(()=>{this.isLoading=!1},1e3))}).catch(s=>{s.response.data.message&&this.$swal("錯誤","你所查看的API不存在","error")})},sendOrder(){this.isLoading=!0;const i=`${v}/api/${p}/order`;this.$http.post(i,{data:this.form}).then(s=>{if(s.data.success){const h=s.data.orderId;setTimeout(()=>{this.isLoading=!1},2e3),this.$refs.form.resetForm(),this.$router.push(`/order/${h}`)}}).catch(s=>{s.response.data.message&&this.$swal("失敗","請檢察表單資訊","error")})},isPhone(i){return/^(09)[0-9]{8}$/.test(i)?!0:"需要正確的電話號碼"}},mounted(){this.getCart()}},T=L('<div><div class="layoutBanner mb-md-5 mb-3"><div class="container"><div class="row justify-content-center my-auto"><div class="col-md-4 text-center layout-Banner-Text"><h2 class="fw-bold mb-3 text-light h1">訂單資訊</h2><nav style="--bs-breadcrumb-divider:&#39;&gt;&#39;;" aria-label="breadcrumb"><ol class="breadcrumb d-flex justify-content-center"><li class="breadcrumb-item"><a href="#" class="aboutHover">首頁</a></li><li class="breadcrumb-item text-light" aria-current="page">訂單資訊</li></ol></nav></div></div></div></div></div><div class="container"><div class="row justify-content-center mb-md-5 mb-3"><div class="col-md-3 col-4"><div class="text-light text-center py-4 stepperActive">確認訂單</div></div><div class="col-md-3 col-4"><div class="text-light text-center py-4 bg-secondary">建立訂單</div></div><div class="col-md-3 col-4"><div class="text-light text-center py-4 bg-secondary">完成訂單</div></div></div></div>',2),k={class:"container"},U={class:"row"},B={class:"col-md-6"},F={class:"border p-4 mb-md-5 mb-3"},I=e("h2",{class:"h4 mb-3"},"訂購人資料",-1),S={class:"mb-3"},C=e("label",{for:"email",class:"form-label"},"Email",-1),N={class:"mb-3"},O=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),R={class:"mb-3"},j=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),q={class:"mb-3"},D=e("label",{for:"address",class:"form-label"},"收件人地址",-1),H={class:"mb-3"},M=e("label",{for:"message",class:"form-label"},"留言",-1),$=e("div",{class:"custom-btn-primary"},[e("button",{type:"submit",class:"btn border w-100"},"送出訂單")],-1),z={class:"col-md-6"},G={class:"p-4 border"},J=e("h2",{class:"h4 mb-3"},"訂單資訊",-1),K={class:"table table-light"},Q=e("thead",null,[e("tr",null,[e("th",null,"產品"),e("th",{class:"text-end"},"總計")])],-1),W={class:"fw-bold"},X={class:"text-end"},Y=e("td",{class:"fw-bold"},"小計",-1),Z={class:"text-end text-primary"},ee=e("td",{class:"fw-bold"},"總計",-1),se={class:"text-end text-primary fw-bold"};function te(i,s,h,oe,t,b){const g=c("VueLoading"),d=c("VField"),n=c("ErrorMessage"),V=c("VForm");return _(),u(f,null,[o(g,{active:t.isLoading},null,8,["active"]),T,e("div",k,[e("div",U,[e("div",B,[e("div",F,[I,o(V,{ref:"form",onSubmit:b.sendOrder},{default:P(({errors:l})=>[e("div",S,[C,o(d,{id:"email",name:"信箱",type:"email",class:m(["form-control bg-light",{"is-invalid":l.信箱}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:t.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>t.form.user.email=a)},null,8,["class","modelValue"]),o(n,{name:"信箱",class:"invalid-feedback"})]),e("div",N,[O,o(d,{id:"name",name:"姓名",type:"text",class:m(["form-control bg-light",{"is-invalid":l.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=a=>t.form.user.name=a)},null,8,["class","modelValue"]),o(n,{name:"姓名",class:"invalid-feedback"})]),e("div",R,[j,o(d,{id:"tel",name:"電話",type:"text",class:m(["form-control bg-light",{"is-invalid":l.電話}]),placeholder:"請輸入電話",rules:b.isPhone,modelValue:t.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>t.form.user.tel=a)},null,8,["rules","class","modelValue"]),o(n,{name:"電話",class:"invalid-feedback"})]),e("div",q,[D,o(d,{id:"address",name:"地址",type:"text",class:m(["form-control bg-light",{"is-invalid":l.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>t.form.user.address=a)},null,8,["class","modelValue"]),o(n,{name:"地址",class:"invalid-feedback"})]),e("div",H,[M,o(d,{id:"message",class:"form-control bg-light",name:"message",cols:"30",rows:"5",as:"textarea",modelValue:t.form.message,"onUpdate:modelValue":s[4]||(s[4]=a=>t.form.message=a)},null,8,["modelValue"])]),$]),_:1},8,["onSubmit"])])]),e("div",z,[e("div",G,[J,e("table",K,[Q,e("tbody",null,[(_(!0),u(f,null,w(t.carts,l=>(_(),u("tr",{key:l.id},[e("td",W,r(l.product.title)+" x "+r(l.qty),1),e("td",X,"$ "+r(l.product.origin_price),1)]))),128)),e("tr",null,[Y,e("td",Z,"$ "+r(t.totalPrice.total),1)]),e("tr",null,[ee,e("td",se,"$ "+r(t.totalPrice.final_total),1)])])])])])])])],64)}const ie=y(A,[["render",te]]);export{ie as default};
