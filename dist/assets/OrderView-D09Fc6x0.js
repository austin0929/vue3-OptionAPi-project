import{m as w}from"./modalMixins-BlWN4yH2.js";import{_ as f,o,c as r,b as t,g as O,x,d as u,B as m,e as n,f as _,F as p,v as L,t as d,r as b}from"./index-z9VVAXen.js";import{V as M}from"./VueLoading-DTgNEhzE.js";const V={data(){return{modal:null}},methods:{toProducts(){this.$router.push("/products"),this.hideModal()}},mixins:[w]},k={class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"myModal"},$={class:"modal-dialog",role:"document"},A={class:"modal-content"},E=x('<div class="modal-header bg-primary"><h5 class="modal-title text-light" id="exampleModalLabel">付款成功</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body text-center"><i class="bi bi-check2-circle text-primary" style="font-size:4rem;"></i><p>還想再逛逛嗎?</p></div>',2),I={class:"modal-footer mx-auto"},T=t("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"},"取消",-1);function B(a,s,h,g,e,i){return o(),r("div",k,[t("div",$,[t("div",A,[E,t("div",I,[T,t("button",{type:"button",class:"btn btn-primary",onClick:s[0]||(s[0]=O((...c)=>i.toProducts&&i.toProducts(...c),["prevent"]))},"回賣場")])])])],512)}const C=f(V,[["render",B]]);var D={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"david555",BASE_URL:"/vue3-OptionAPi-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:y,VITE_APP_PATH:v}=D,j={components:{PayOrderModal:C,VueLoading:M},data(){return{order:{},orderId:"",isLoading:!1}},methods:{getOrder(){this.isLoading=!0;const a=`${y}/api/${v}/order/${this.orderId}`;this.$http.get(a).then(s=>{s.data.success&&(this.order=s.data.order,setTimeout(()=>{this.isLoading=!1},2e3))}).catch(s=>{s.response.data.message&&this.$swal("錯誤","你所查看的API不存在","error")})},payOrder(){this.isLoading=!0;const a=`${y}/api/${v}/pay/${this.orderId}`;this.$http.post(a).then(s=>{s.data.success&&(this.isLoading=!1,this.$refs.payOrderModal.showModal(),this.getOrder())}).catch(s=>{s.response.data.message&&this.$swal("錯誤","付款失敗","error")})}},mounted(){this.orderId=this.$route.params.id,this.getOrder()}},N=x('<div><div class="layoutBanner mb-md-5 mb-3"><div class="container"><div class="row justify-content-center my-auto"><div class="col-md-4 text-center layout-Banner-Text"><h2 class="fw-bold mb-3 text-light h1">訂單明細</h2><nav style="--bs-breadcrumb-divider:&#39;&gt;&#39;;" aria-label="breadcrumb"><ol class="breadcrumb d-flex justify-content-center"><li class="breadcrumb-item"><a href="#" class="aboutHover">首頁</a></li><li class="breadcrumb-item text-light" aria-current="page">訂單明細</li></ol></nav></div></div></div></div></div>',1),R={class:"container"},S={class:"row justify-content-center mb-md-5 mb-3"},H=t("div",{class:"col-md-3 col-4"},[t("div",{class:"text-light text-center py-4 bg-secondary"},"確認訂單")],-1),U={class:"col-md-3 col-4"},z={class:"col-md-3 col-4"},F={class:"container mb-md-5 mb-3"},q={class:"row justify-content-center"},G={class:"col-md-8 mb-5"},J={key:0,class:"text-primary h6 mb-4"},K=t("i",{class:"bi bi-check-circle me-1"},null,-1),Q={class:"border p-4"},W=t("h2",{class:"h5 mb-4"},"訂單明細",-1),X={class:"table border"},Y=t("thead",null,[t("tr",null,[t("th",null,"產品"),t("th",{class:"text-end"},"總計")])],-1),Z={class:"text-secondary"},tt={class:"text-end"},et=t("td",{class:"w-50 border"},"總計",-1),st={class:"text-end text-primary fw-bold"},ot={class:"col-md-8"},rt={class:"border p-4 mb-md-5 mb-3"},dt=t("h3",{class:"h5 mb-4"},"訂購人資料",-1),at={key:0,class:"table border"},it=t("th",{width:"180"},[n("姓名 "),t("span",{class:"text-primary"},"*")],-1),lt=t("th",{width:"180"},[n("Email "),t("span",{class:"text-primary"},"*")],-1),nt=t("th",{width:"180"},[n("電話 "),t("span",{class:"text-primary"},"*")],-1),ct=t("th",{width:"180"},[n("地址 "),t("span",{class:"text-primary"},"*")],-1),_t=t("th",{width:"180"},"備註",-1),ht=t("th",{width:"180"},"付款狀態",-1),ut={key:0,class:"text-primary fw-bold"},mt={key:1,class:"text-secondary fw-bold"},pt={class:"text-end",colspan:"6"};function bt(a,s,h,g,e,i){const c=b("VueLoading"),P=b("PayOrderModal");return o(),r(p,null,[u(c,{active:e.isLoading},null,8,["active"]),N,t("div",R,[t("div",S,[H,t("div",U,[t("div",{class:m(["text-light text-center py-4",e.order.is_paid===!1?"stepperActive":"stepperDefault"])}," 建立訂單 ",2)]),t("div",z,[t("div",{class:m(["text-light text-center py-4",e.order.is_paid===!0?"stepperActive":"stepperDefault"])}," 完成訂單 ",2)])])]),t("div",F,[t("div",q,[t("div",G,[t("div",null,[e.order.is_paid?(o(),r("h2",J,[K,n("感謝您的訂購，訂單已經收到。 ")])):_("",!0)]),t("div",Q,[W,t("table",X,[Y,t("tbody",null,[(o(!0),r(p,null,L(e.order.products,l=>(o(),r("tr",{key:l.id},[t("td",Z,d(l.product.title)+" x 1",1),t("td",tt,"$ "+d(l.final_total),1)]))),128)),t("tr",null,[et,t("td",st,"$ "+d(e.order.total),1)])])])])]),t("div",ot,[t("div",rt,[dt,e.order.user?(o(),r("table",at,[t("tbody",null,[t("tr",null,[it,t("td",null,d(e.order.user.name),1)]),t("tr",null,[lt,t("td",null,d(e.order.user.email),1)]),t("tr",null,[nt,t("td",null,d(e.order.user.tel),1)]),t("tr",null,[ct,t("td",null,d(e.order.user.address),1)]),t("tr",null,[_t,t("td",null,d(e.order.message),1)]),t("tr",null,[ht,e.order.is_paid?(o(),r("td",ut,"已付款")):(o(),r("td",mt,"未付款"))])]),t("tfoot",null,[t("tr",null,[t("td",pt,[e.order.is_paid?_("",!0):(o(),r("button",{key:0,class:"btn btn-primary",type:"button",onClick:s[0]||(s[0]=(...l)=>i.payOrder&&i.payOrder(...l))}," 確認付款 "))])])])])):_("",!0)])])])]),u(P,{ref:"payOrderModal"},null,512)],64)}const xt=f(j,[["render",bt]]);export{xt as default};
