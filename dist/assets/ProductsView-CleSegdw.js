import { P as V } from './PaginationComponent-BHj4kVib.js'; import { c as A } from './cartStore-Bp0LImvg.js'; import { b as C } from './bookmarkStore-BgG0JuZf.js'; import { _ as T, a as v, c as n, d as a, w as u, b as t, F as m, v as g, y as b, z as $, A as B, x as E, r as _, o as d, e as f, t as l, g as P } from './index-DrL7xUhK.js'; import { B as U } from './BannerSection-DB9sHSmb.js'; import './index-Bnm8mFos.js'; const I = { VITE_APP_URL: 'https://vue3-course-api.hexschool.io/v2', VITE_APP_PATH: 'david555', BASE_URL: './', MODE: 'production', DEV: !1, PROD: !0, SSR: !1 }; const { VITE_APP_URL: y, VITE_APP_PATH: x } = I; const j = { components: { Pagination: V, BannerSection: U }, data () { return { products: [], searchKeyword: '', selectPrice: '價格', pagination: {}, isLoading: !1, categories: ['漢堡', '披薩', '飲料', '牛排', '沙拉'] } }, methods: { ...v(C, ['addBookmark']), ...v(A, ['addToCart']), getProducts (o = 1) { this.isLoading = !0; const { category: s = '' } = this.$route.query; const c = `${y}/api/${x}/products?category=${s}&page=${o}`; this.$http.get(c).then(i => { i.data.success && (this.searchKeyword = '', this.products = i.data.products, this.pagination = i.data.pagination, setTimeout(() => { this.isLoading = !1 }, 500)) }).catch(i => { i.response.data.message && this.$swal('錯誤', '你所查看的API不存在', 'error') }) }, searchProduct () { const o = `${y}/api/${x}/products/all`; this.$http.get(o).then(s => { this.products = s.data.products; const c = this.products.filter(i => i.title.trim().toLowerCase().includes(this.searchKeyword.toLowerCase())); this.products = c }).catch(s => { s.response.data.message && this.$swal('錯誤', '你所查看的API不存在', 'error') }) }, sortedProducts () { let o = ''; this.products.sort((s, c) => this.selectPrice === '1' ? o = s.price - c.price : this.selectPrice === '2' ? o = c.price - s.price : o) } }, computed: { sortPrice () { return this.sortedProducts() } }, watch: { '$route.query': { handler () { this.getProducts() }, deep: !0 }, searchKeyword (o) { this.searchProduct(o) } }, created () { this.getProducts(), this.searchProduct() } }; const D = t('div', { class: 'loadingio-spinner-spin-nq4q5u6dq7r' }, [t('div', { class: 'ldio-x2uulkbinbj' }, [t('div', null, [t('div')]), t('div', null, [t('div')]), t('div', null, [t('div')]), t('div', null, [t('div')]), t('div', null, [t('div')]), t('div', null, [t('div')]), t('div', null, [t('div')]), t('div', null, [t('div')])])], -1); const H = { class: 'position-relative py-8 mb-6' }; const K = E('<div class="container d-flex flex-column"><div class="row justify-content-center my-auto"><div class="col-md-4 text-center"><h2 class="fw-bold mb-3 text-light h1">產品列表</h2><nav style="--bs-breadcrumb-divider:&#39;&gt;&#39;;" aria-label="breadcrumb"><ol class="breadcrumb d-flex justify-content-center"><li class="breadcrumb-item"><a href="#" class="aboutHover">首頁</a></li><li class="breadcrumb-item text-light" aria-current="page">產品列表</li></ol></nav></div></div></div>', 1); const q = { class: 'container' }; const R = { class: 'row' }; const M = { class: 'col-lg-3 mb-3' }; const N = { class: 'bg-info text-secondary p-4 rounded border' }; const F = t('h2', { class: 'fw-bold h5' }, '產品列表', -1); const O = t('hr', null, null, -1); const z = { class: 'px-0' }; const G = { class: 'mb-3' }; const J = { class: 'col-lg-9' }; const Q = { class: 'd-flex justify-content-between' }; const W = { class: 'd-flex mb-3' }; const X = { class: 'productSelect ms-auto mb-3' }; const Y = t('option', { selected: '', disabled: '' }, '價格', -1); const Z = t('option', { value: '1' }, '低到高', -1); const tt = t('option', { value: '2' }, '高到低', -1); const et = [Y, Z, tt]; const st = { class: 'row mb-6' }; const ot = { class: 'card border p-2 mb-4 position-relative' }; const it = ['src']; const rt = { href: '#', class: 'p-2 bookmark-icon' }; const ct = ['onClick']; const at = { class: 'card-body p-0' }; const nt = { class: 'card-text text-muted mb-2 text-truncate' }; const dt = { class: 'd-flex justify-content-between align-items-center' }; const lt = { class: 'text-primary fw-bold me-2' }; const ut = { class: 'mb-0 text-muted text-end d-inline-block' }; const _t = ['onClick']; const ht = t('i', { class: 'bi bi-handbag' }, null, -1); const pt = [ht]; function mt (o, s, c, i, r, h) { const w = _('VueLoading'); const k = _('BannerSection'); const p = _('router-link'); const L = _('Pagination'); return d(), n(m, null, [a(w, { active: r.isLoading }, { default: u(() => [D]), _: 1 }, 8, ['active']), t('div', H, [a(k), K]), t('div', q, [t('div', R, [t('div', M, [t('div', N, [F, O, t('ul', z, [t('li', G, [a(p, { class: 'productLinkHover', to: '/products' }, { default: u(() => [f('全部產品')]), _: 1 })]), (d(!0), n(m, null, g(r.categories, e => (d(), n('li', { class: 'mb-3', key: e }, [a(p, { class: 'productLinkHover', to: `/products?category=${e}` }, { default: u(() => [f(l(e), 1)]), _: 2 }, 1032, ['to'])]))), 128))])])]), t('div', J, [t('div', Q, [t('div', W, [b(t('input', { class: 'form-control', 'onUpdate:modelValue': s[0] || (s[0] = e => r.searchKeyword = e), type: 'search', placeholder: '產品搜尋' }, null, 512), [[$, r.searchKeyword, void 0, { trim: !0 }]])]), t('div', X, [b(t('select', { class: 'form-select', 'aria-label': 'Default select example', 'onUpdate:modelValue': s[1] || (s[1] = e => r.selectPrice = e), onChange: s[2] || (s[2] = (...e) => h.sortPrice && h.sortPrice(...e)) }, et, 544), [[B, r.selectPrice]])])]), t('div', st, [(d(!0), n(m, null, g(r.products, e => (d(), n('div', { class: 'col-lg-4 col-md-6', key: e.id }, [t('div', ot, [a(p, { to: `/product/${e.id}` }, { default: u(() => [t('img', { height: '200', src: e.imageUrl, class: 'card-img-top rounded mb-3 object-fit-cover cardHover' }, null, 8, it)]), _: 2 }, 1032, ['to']), t('a', rt, [t('i', { class: 'bi bi-heart-fill', onClick: P(S => o.addBookmark(e), ['prevent']) }, null, 8, ct)]), t('div', at, [t('h4', null, l(e.title), 1), t('p', nt, l(e.description), 1), t('div', dt, [t('div', null, [t('span', lt, '$ ' + l(e.origin_price), 1), t('p', ut, [t('del', null, '$' + l(e.origin_price), 1)])]), t('button', { type: 'type', class: 'btn btn-primary', onClick: P(S => o.addToCart(e), ['prevent']) }, pt, 8, _t)])])])]))), 128))])])])]), a(L, { pages: r.pagination, onUpdatePage: h.getProducts }, null, 8, ['pages', 'onUpdatePage'])], 64) } const xt = T(j, [['render', mt]]); export { xt as default }
